## 闪电贷（Flash Loan）
* 闪电贷顾名思义，就是在极短的时间内（一个区块时间或者一笔交易内）完成贷款与还款的操作。
* 在DeFi领域，闪电贷为金融业务提供了免抵押借款服务，是DeFi世界的一款利器。闪电贷是通过智能合约的原子性，来完成零风险贷款的业务，因此闪电贷业务只能由智能合约来实现。
* 简单来讲，就是在一个区块交易中，同时完成借款和还款操作这两个操作，无需抵押任何资产，只需支付手续费即可。用户在借到款之后，可以利用借到的资产进行其他操作，比如套利、偿还抵押借款、自清算等操作。然后在交易结束的时候，用户只要把借到的款项及手续费及时归还就可以，否则该笔交易就会回滚，就像什么也没有发生过一样。
* 什么是原子性？
这里的原子性是指具有原子性的事务。该原子事务是不可分割的，在事务执行完毕之前，不会被任何其他操作所中断。而该事务中的所有操作，要么全部被成功执行，要么全部执行失败，不会出现一部分成功而另一部分失败的情况。
* 以太坊的每个交易都是具有原子性的，每笔以太坊交易中，可以包含多个操作,所有这些操作都可以同时在一个交易中完成，而其中只要有一个操作失败，则整笔交易都会失败回滚，就像什么都没有发生一样。单笔交易只受Gas费用限制，以及以太坊区块容量的限制，所以理论上可以有成千上万个操作步骤。
### 闪电贷（Flash Loan）和闪电兑（Flash Swap）
* 闪电贷（Flash Loan）必须以你借入的同一资产偿还：如果借入Dai，就需要偿还Dai。生息协议Aave对闪电贷收取0.09％的费用。它至少需要进行三个操作：
在Aave上借款
在一个DEX上进行兑换
在另一个DEX上进行套利交易以实现利润，最后偿还借款以及闪电贷费用。
* 闪电兑(Flash Swap)允许交易者在交易后期支付（或返还）资产之前，先接收资产并在其他地方利用该资产。就像在Uniswap上所做的那样，闪电交换没有固定费用，而是收取交换费。与闪电贷相比，闪电兑换可以看作是“免费”贷款，因为兑换手续费是从交易订单中扣除的，我们不必单独付款。最后一点区别：我们可以偿还兑换的任何资产。如果我们使用闪电兑换拿ETH买入Dai，那么用Dai或ETH偿还都可以，这使我们可以执行更复杂的操作。
* 闪电兑换和闪电贷均采用乐观转帐（Optimistic Tranfer）,这个了不起的DeFi创新技术使用户可以进行无抵押贷款或兑换交易，只要用户在交易结束时还清借款，就可以执行交易。
### 2 闪电贷应用场景
闪电贷最常见的使用案例有3种，即套利（Arbitrage）、更换抵押品（Swapping Collateral）、自我清算（Self-Liquidation）。

## 智能合约:fiat-shamir零知识证明合约
* Fiat-Shamir零知识证明协议可以允许用户向注册的网站证明自己知道自己的密码，而不向网站泄露任何关于密码的信息。
* 流程介绍
参与者：登陆者Peggy，验证者Victor
公共参数：一个素数n nn以及一个模n群的生成元g 
1.Step-1 注册
Peggy选择一个密码，使用Hash函数取摘要，然后将其转换为一个整型设为x,即x = int(Hash(passwd))构造y =g^x^ mod n发送y给Victor
Victor保存下y(区块链环境中存储在合约中），表示着用户Peggy已经注册成功
2.Step-2登陆
Peggy开始登陆，自己生成—个随机数记为v,计算:t = g^v^ mod n
将t发送给Victor
3.Step-3验证端随机数挑战
Victor收到t之后，发送一个随机数给Peggy记为c
4.Step-4客户端应答
Peggy收到随机数c之后计算:
r=v - cx mod (n - 1)并将r发送给Victor
5.Step-5验证
Victor收到后开始验证计算:t'=(g^r^)(y^c^) mod n
通过判断t'==t判断用户是香拥有该密码


